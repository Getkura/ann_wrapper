#!/usr/bin/env ruby

##########################################
#
# Example usage of ANN wrapper and methods
#
##########################################

require 'ann_wrapper'

if ARGV.size < 1
	puts "Usage: example <ann anime id>"
	exit
end

def show(obj, method)
	puts "#{method}: #{obj.send(method).to_s}"
end

begin
	# create ANN API Wrapper instance
	anime = ANN_Wrapper.instance.fetch_ann_anime(ARGV[0])

	if anime.is_a?(ANN_Error)
		puts anime.message
		exit(1)
	end

	#demo
	show anime, :title
	show anime, :alt_titles
	show anime, :type
#	show anime, :synopsis
	show anime, :num_episodes
	show anime, :genres
	show anime, :themes
#	show anime, :op_theme
#	show anime, :ed_theme
#	show anime, :episodes
#	show anime, :staff
#	show anime, :cast
#	show anime, :images

#titles = ANN_Wrapper.instance.fetch_titles("anime", 0, 5)
#if titles.is_a?(ANN_Error)
#	puts titles.message
#	exit(1)
#end
#
#titles.each do |title|
#	puts title.id
#end
#
rescue
	puts "oops"

	# print last exception and backtrace
	puts $!.inspect, $@
end
